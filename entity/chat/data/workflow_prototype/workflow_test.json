{
  "initial_state": "none",
  "states": {
    "none": {
      "transitions": {
        "welcome_user": {
          "next": "greeting_sent",
          "action": {
            "name": "process_event",
            "config": {
              "type": "notification",
              "notification": "\uD83D\uDC4B Welcome to Cyoda Application Builder! We’re excited to build something amazing with you! \uD83D\uDE04  \n\nWe’re here to help with building and deploying on Cyoda Cloud! Reach out anytime! \uD83C\uDF1F Your branch will be ready soon, and I’ll notify you when I push changes. If you have suggestions, message me or use Canvas! \uD83D\uDE0A  \n\nIn Canvas, you can code, edit, and improve around the main app build flow! It’s a great way to collaborate and make changes! \uD83D\uDCBB  \n\nIf you’re happy with the progress or want me to pull your changes, just give me a thumbs up! \uD83D\uDC4D  (currently approve button in the top panel)\n\nIf something goes wrong, no worries—just roll back! \uD83D\uDE2C Your app will be live on Cyoda Platform GitHub soon! \uD83D\uDE80 Let’s build your branch together! \uD83C\uDF3F",
              "publish": true
            }
          }
        }
      }
    },
    "greeting_sent": {
      "transitions": {
        "clone_repo": {
          "next": "repository_cloned",
          "action": {
            "name": "process_event",
            "config": {
              "type": "function",
              "function": {
                "name": "clone_repo",
                "description": "Clones template repository"
              },
              "publish": true
            }
          }
        }
      }
    },
    "repository_cloned": {
      "transitions": {
        "generate_entities_data_design": {
          "next": "generated_entities_data_design",
          "action": {
            "name": "process_event",
            "config": {
              "type": "prompt",
              "publish": false,
              "model": {},
              "memory_tags": [
                "generate_entities_data_design"
              ],
              "messages": [
                {
                  "role": "user",
                  "content": [
                    "Please, transform data about entities {entities_list} into the following json: {",
                    "    \"entities\": [",
                    "        {",
                    "            \"entity_name\": \"\", //put entity name here, lowercase, underscore",
                    "            \"entity_data_example\": \"\", //put entity data golden json example according to the requirement, list all entity attributes specified by the user or relevant to the request body",
                    "        }",
                    "    ]",
                    "}"
                  ]
                }
              ],
              "response_format": {
                "name": "entities_design_schema",
                "description": "entities design schema",
                "schema": {
                  "type": "object",
                  "properties": {
                    "entities": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "entity_name": {
                            "type": "string"
                          },
                          "entity_data_example": {
                            "type": "object",
                            "properties": {}
                          }
                        },
                        "required": [
                          "entity_name",
                          "entity_data_example"
                        ]
                      }
                    }
                  },
                  "required": [
                    "entities"
                  ]
                }
              },
              "input": {
                "local_fs": [
                  "logic_instruction.txt"
                ]
              },
              "output": {
                "local_fs": [
                  "entity/entities_data_design.json"
                ]
              }
            }
          }
        }
      }
    },
    "generated_entities_data_design": {
      "transitions": {
        "save_entity_templates": {
          "next": "saved_entity_templates",
          "action": {
            "name": "process_event",
            "config": {
              "type": "function",
              "function": {
                "name": "save_entity_templates",
                "description": "Clones template repository"
              },
              "publish": true
            }
          }
        }
      }
    }
  }
}