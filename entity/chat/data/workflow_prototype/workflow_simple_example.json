{
  "initial_state": "none",
  "states": {
    "none": {
      "transitions": {
        "greet_user": {
          "next": "ask_city",
          "action": {
            "name": "process_event",
            "config": {
              "type": "question",
              "question": "üëã Hello! I'm your weather assistant. Which city's weather would you like to check?",
              "publish": true,
              "allow_anonymous_users": true
            }
          }
        }
      }
    },
    "ask_city": {
      "transitions": {
        "get_weather_info": {
          "next": "weather_provided",
          "manual": true,
          "action": {
            "name": "process_event",
            "config": {
              "type": "agent",
              "publish": true,
              "allow_anonymous_users": true,
              "model": {
                "provider": "openai",
                "model_name": "gpt-4o-mini",
                "temperature": 0.2
              },
              "tools": [
                {
                  "type": "function",
                  "function": {
                    "name": "get_weather",
                    "description": "Fetch current weather for a specified city",
                    "parameters": {
                      "type": "object",
                      "properties": {
                        "city": {
                          "type": "string",
                          "description": "The city name"
                        }
                      },
                      "required": ["city"]
                    }
                  }
                },
                {
                  "type": "function",
                  "function": {
                    "name": "get_humidity",
                    "description": "Fetch current humidity level for a specified city",
                    "parameters": {
                      "type": "object",
                      "properties": {
                        "city": {
                          "type": "string",
                          "description": "The city name"
                        }
                      },
                      "required": ["city"]
                    }
                  }
                }
              ],
              "messages": [
                {
                  "role": "system",
                  "content": "You help users by providing weather and humidity information using available tools."
                }
              ],
              "tool_choice": "auto"
            }
          }
        }
      }
    },
    "weather_provided": {
      "transitions": {
        "farewell": {
          "next": "end",
          "action": {
            "name": "process_event",
            "config": {
              "type": "notification",
              "notification": "üå§Ô∏è Hope you found that helpful! Let me know if you need anything else.",
              "publish": true,
              "allow_anonymous_users": true
            }
          }
        }
      }
    },
    "end": {
      "transitions": {}
    }
  }
}
