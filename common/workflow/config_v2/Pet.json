{
  "desc": "Workflow to manage PetUpdateJob processing from PENDING to COMPLETED or FAILED",
  "id": "pet_update_job_workflow",
  "initialState": "none",
  "name": "PetUpdateJob workflow",
  "states": {
    "COMPLETED": {
      "transitions": []
    },
    "FAILED": {
      "transitions": []
    },
    "PENDING": {
      "transitions": [
        {
          "criterion": {
            "function": {
              "name": "isJobValid"
            },
            "type": "function"
          },
          "id": "pending_to_processing",
          "next": "PROCESSING"
        },
        {
          "id": "pending_to_failed",
          "next": "FAILED"
        }
      ]
    },
    "PROCESSING": {
      "transitions": [
        {
          "criterion": {
            "function": {
              "name": "hasProcessingError"
            },
            "type": "function"
          },
          "id": "processing_to_failed",
          "next": "FAILED"
        },
        {
          "criterion": {
            "function": {
              "name": "hasMorePetsToProcess"
            },
            "type": "function"
          },
          "id": "processing_to_processing",
          "next": "PROCESSING"
        },
        {
          "criterion": {
            "function": {
              "name": "isProcessingSuccessful"
            },
            "type": "function"
          },
          "id": "processing_to_completed",
          "next": "COMPLETED"
        }
      ]
    },
    "none": {
      "transitions": [
        {
          "id": "none_to_pending",
          "next": "PENDING"
        }
      ]
    }
  },
  "version": "1.0"
}