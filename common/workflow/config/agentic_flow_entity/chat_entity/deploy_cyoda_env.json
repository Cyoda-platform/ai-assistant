{
  "initial_state": "none",
  "workflow_name": "chat_entity",
  "states": {
    "none": {
      "transitions": {
        "notify_env_deployment": {
          "next": "notified_env_deployment",
          "action": {
            "name": "process_event",
            "config": {
              "type": "notification",
              "notification": "Hello! Let's start deploying your Cyoda environment. I will let you know once it's ready",
              "publish": true,
              "allow_anonymous_users": true
            }
          }
        }
      }
    },
    "notified_env_deployment": {
      "transitions": {
        "schedule_deploy_env": {
          "next": "scheduled_deploy_env",
          "action": {
            "name": "process_event",
            "config": {
              "type": "function",
              "publish": true,
              "function": {
                "name": "schedule_deploy_env",
                "description": "",
                "max_iteration": 0
              }
            }
          }
        }
      }
    },
    "scheduled_deploy_env": {
      "transitions": {
        "lock_chat": {
          "next": "locked_chat",
          "action": {
            "name": "process_event",
            "config": {
              "type": "function",
              "publish": true,
              "function": {
                "name": "lock_chat",
                "description": "",
                "max_iteration": 0
              }
            }
          }
        }
      }
    },
    "locked_chat": {
      "transitions": {
        "finish_deployment_success": {
          "next": "deployed_env",
          "manual": true,
          "action": {
            "name": "process_event",
            "config": {
              "type": "notification",
              "notification": "Your cyoda environment {cyoda_env_name} has been successfully deployed!",
              "publish": true,
              "allow_anonymous_users": true
            }
          }
        },
        "finish_deployment_failure": {
          "next": "deployed_env",
          "manual": true,
          "action": {
            "name": "process_event",
            "config": {
              "type": "notification",
              "notification": "Sorry, we had internal issues while deploying your environment",
              "publish": true,
              "allow_anonymous_users": true
            }
          }
        }
      }
    },
    "deployed_env": {
      "transitions": {
        "lock_chat": {
          "next": "locked_chat",
          "action": {
            "name": "process_event",
            "config": {
              "type": "function",
              "publish": true,
              "function": {
                "name": "lock_chat",
                "description": "",
                "max_iteration": 0
              }
            }
          }
        }
      }
    }
  }
}

